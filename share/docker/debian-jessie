FROM debian:jessie

RUN apt-get -y update && \
    apt-get install -y  build-essential gfortran f2c \
            autoconf automake libtool autoconf-archive autotools-dev \
            maxima libblas-dev liblapack-dev \
            libsdl2-dev \
            libompl-dev libfcl-dev \
            doxygen groff \
            sbcl \
            flex povray libav-tools \
            coinor-libclp-dev libglpk-dev liblpsolve55-dev \
            wget git

# Debian Jessie requires a newer SBCL
RUN wget 'http://prdownloads.sourceforge.net/sbcl/sbcl-1.3.9-x86-64-linux-binary.tar.bz2' && \
    tar xf sbcl*.tar.* && \
    cd sbcl*linux && \
    sh install.sh

RUN wget https://beta.quicklisp.org/quicklisp.lisp && \
    sbcl --load quicklisp.lisp \
         --eval '(quicklisp-quickstart:install)' \
         --eval '(ql:quickload :cffi)' \
         --eval '(ql:quickload :cffi-grovel)' \
         --eval '(ql:quickload :cxml)' \
         --eval '(ql:quickload :cl-ppcre)' \
         --eval '(ql:quickload :clpython)' \
         --eval '(quit)'

RUN cd /usr/local && \
    (wget -O - http://mirror.cs.umn.edu/blender.org/release/Blender2.77/blender-2.77a-linux-glibc211-x86_64.tar.bz2 | tar xjf -) && \
    ln -s /usr/local/blender-2.77a-linux-glibc211-x86_64/blender /usr/local/bin

RUN cd && git clone https://github.com/RethinkRobotics/baxter_common
ENV ROS_PACKAGE_PATH=/root/baxter_common

COPY . /root/amino


# Local Variables:
# mode: dockerfile
# End:
