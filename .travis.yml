#cache:
#  apt: true
#  directories:
#    - /usr/local

language: cpp

matrix:
  include:
    - os: linux
      dist: trusty
      sudo: required
      compiler: gcc
    - os: osx
      compiler: clang
      env: CPPFLAGS=-I/usr/local/opt/openblas/include

install:
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then
      ./install-apt.sh;
    fi;
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then
       brew update;
       brew unlink libtool;
       brew install autoconf-archive homebrew/science/openblas homebrew/science/maxima sdl2 libtool;
    fi

script:
  - autoreconf -i
  - ./configure --without-ompl --without-common-lisp;
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then
       make -kj4 distcheck;
    fi;
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then
       make -kj4 && make check;
    fi



#addons:
#  apt:
#    packages:
#      - gfortran
#      - autoconf
#      - automake
#      - autoconf-archive
#      - autotools-dev \
#      - maxima
#      - libblas-dev
#      - liblapack-dev \
#      - libglew-dev
#      - libsdl2-dev
#      - libfcl-dev
#      - libompl-dev
#      - flex
#      - coinor-libclp-dev
#      - libglpk-dev
#      - liblpsolve55-dev


#before_install:
  #- sudo docker pull ubuntu:xenial
  #- docker ps -a

